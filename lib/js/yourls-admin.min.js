function yourlsMessage(s,r){jQuery("div#wpbody h2:first").after('<div id="message" class="'+s+' below-h2"><p>'+r+"</p></div>")}function yourlsClearAdmin(){jQuery("div#wpbody div#message").remove(),jQuery("div#wpbody div.yourls-message").remove()}function yourlsBtnDisable(s,r,e){jQuery(s).find(r).css("visibility","visible"),jQuery(s).find(e).attr("disabled","disabled")}function yourlsBtnEnable(s,r,e){jQuery(s).find(r).css("visibility","hidden"),jQuery(s).find(e).removeAttr("disabled")}jQuery(document).ready(function(s){s.fn.divExists=function(s){var r=[].slice.call(arguments,1);return this.length&&s.call(this,r),this};var r="",e="",i="",t="",o="",a="",n="",l="",u="";s("div.yourls-sidebox").on("click","a.admin-twitter-link",function(){return s(window).width()>765?(r=s(this).attr("href"),window.open(r,"social-share-dialog","width=626,height=436"),!1):void 0}),s("form#addtag").divExists(function(){s("input#yourls-new-term-box").prop("checked",!1),s("div.yourls-term-new-keyword-field").hide()}),s("div.yourls-term-new-create-field").on("click","input#yourls-new-term-box",function(){s("div.yourls-term-new-keyword-field").slideToggle("normal")}),s("td.apikey-field-wrapper").divExists(function(){s("input#yourls-api").hidePassword(!1),s("td.apikey-field-wrapper").on("click","span.password-toggle",function(){s(this).hasClass("password-visible")?(s(this).removeClass("password-visible"),s("input#yourls-api").hidePassword(!1)):(s(this).addClass("password-visible"),s("input#yourls-api").showPassword(!1))})}),s("div.yourls-sidebox").find("a.external").attr("target","_blank"),s("tr.setting-item-list").divExists(function(){s(this).each(function(){i=s(this).data("list"),t=s("table.yourls-table").find('tr.yourls-custom-list[data-list="'+i+'"]'),e=s(this).find("input.setting-list-checkbox").is(":checked"),e===!0&&s(t).show(),e!==!0&&(s(t).hide(),s(t).find("input:checkbox").prop("checked",!1))}),s("tr.setting-item-list").on("change","input.setting-list-checkbox",function(){i=s(this).parents("tr.setting-item-list").data("list"),t=s("table.yourls-table").find('tr.yourls-custom-list[data-list="'+i+'"]'),e=s(this).is(":checked"),e===!0&&s(t).fadeIn(700),e!==!0&&(s(t).fadeOut(700),s(t).find("input:checkbox").prop("checked",!1))})}),s("div#yourls-post-display").on("click","input.yourls-api",function(){if(l=s(this).data("post-id"),u=s(this).data("nonce"),""!==l&&""!==u){yourlsClearAdmin(),s("div#yourls-post-display").find("span.yourls-spinner").css("visibility","visible"),s("div#yourls-post-display").find("input.yourls-api").attr("disabled","disabled"),n=s("div#yourls-post-display").find("input.yourls-keyw").val();var r={action:"create_yourls",keyword:n,post_id:l,nonce:u};jQuery.post(ajaxurl,r,function(r){s("div#yourls-post-display").find("span.yourls-spinner").css("visibility","hidden"),s("div#yourls-post-display").find("input.yourls-api").removeAttr("disabled");var e;try{e=jQuery.parseJSON(r)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}e.success===!0?yourlsMessage("updated",e.message):e.success===!1&&null!==e.message?yourlsMessage("error",e.message):yourlsMessage("error",yourlsAdmin.defaultError),e.success===!0&&null!==e.linkbox&&(s("div#yourls-post-display").find("p.yourls-submit-block").remove(),s("div#yourls-post-display").find("p.yourls-input-block").replaceWith(e.linkbox),s("div#edit-slug-box").append('<input type="hidden" value="'+e.linkurl+'" id="shortlink">'),s("div#edit-slug-box").append(yourlsAdmin.shortSubmit))})}}),s("div#yourls-post-display").on("click","span.yourls-delete",function(){if(l=s(this).data("post-id"),u=s(this).data("nonce"),""!==l&&""!==u){yourlsClearAdmin();var r={action:"delete_yourls",post_id:l,nonce:u};jQuery.post(ajaxurl,r,function(r){var e;try{e=jQuery.parseJSON(r)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}e.success===!0?yourlsMessage("updated",e.message):e.success===!1&&null!==e.message?yourlsMessage("error",e.message):yourlsMessage("error",yourlsAdmin.defaultError),e.success===!0&&null!==e.yourlsbox&&(s("div#yourls-post-display").find("p.howto").remove(),s("div#yourls-post-display").find("p.yourls-exist-block").replaceWith(e.linkbox),s("div#edit-slug-box").find("input#shortlink").remove(),s("div#edit-slug-box").find('a:contains("Get Shortlink")').remove())})}}),s("div.row-actions").on("click","a.yourls-admin-update",function(r){if(r.preventDefault(),u=s(this).data("nonce"),""!==u&&(l=s(this).data("post-id"),""!==l)){a=s(this).parents("div.row-actions"),o=s(this).parents("tr.entry").find("td.yourls-click");var e={action:"stats_yourls",post_id:l,nonce:u};jQuery.post(ajaxurl,e,function(s){a.removeClass("visible");var r;try{r=jQuery.parseJSON(s)}catch(e){return!1}r.success===!0&&null!==r.clicknm&&o.find("span").text(r.clicknm)})}}),s("div.row-actions").on("click","a.yourls-admin-create",function(r){if(r.preventDefault(),u=s(this).data("nonce"),""!==u&&(l=s(this).data("post-id"),""!==l)){a=s(this).parents("div.row-actions"),o=s(this).parents("div.row-actions").find("span.create-yourls");var e={action:"inline_yourls",post_id:l,nonce:u};jQuery.post(ajaxurl,e,function(s){a.removeClass("visible");var r;try{r=jQuery.parseJSON(s)}catch(e){return!1}r.success===!0&&null!==r.rowactn&&o.replaceWith(r.rowactn)})}}),s("div#yourls-admin-status").on("click","input.yourls-click-status",function(){if(u=s("input#yourls_status").val(),""!==u){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-admin-status","span.yourls-status-spinner","input.yourls-click-status");var r={action:"status_yourls",nonce:u};jQuery.post(ajaxurl,r,function(r){yourlsBtnEnable("div#yourls-admin-status","span.yourls-status-spinner","input.yourls-click-status");var e;try{e=jQuery.parseJSON(r)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}e.success===!0?(""!==e.baricon&&s("div#yourls-admin-status").find("span.api-status-icon").replaceWith(e.baricon),""!==e.message&&s("div#yourls-admin-status").find("p.api-status-text").text(e.message),""!==e.stcheck&&s("div#yourls-admin-status").find("p.api-status-actions").append(e.stcheck)):e.success===!1&&null!==e.message?yourlsMessage("error",e.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-click-updates",function(){if(u=s("input#yourls_refresh").val(),""!==u){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-data-refresh","span.yourls-refresh-spinner","input.yourls-click-updates");var r={action:"refresh_yourls",nonce:u};jQuery.post(ajaxurl,r,function(s){yourlsBtnEnable("div#yourls-data-refresh","span.yourls-refresh-spinner","input.yourls-click-updates");var r;try{r=jQuery.parseJSON(s)}catch(e){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-click-import",function(){if(u=s("input#yourls_import").val(),""!==u){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-data-refresh","span.yourls-import-spinner","input.yourls-click-import");var r={action:"import_yourls",nonce:u};jQuery.post(ajaxurl,r,function(s){yourlsBtnEnable("div#yourls-data-refresh","span.yourls-import-spinner","input.yourls-click-import");var r;try{r=jQuery.parseJSON(s)}catch(e){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-convert",function(){if(u=s("input#yourls_convert").val(),""!==u){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-data-refresh","span.yourls-convert-spinner","input.yourls-convert");var r={action:"convert_yourls",nonce:u};jQuery.post(ajaxurl,r,function(s){yourlsBtnEnable("div#yourls-data-refresh","span.yourls-convert-spinner","input.yourls-convert");var r;try{r=jQuery.parseJSON(s)}catch(e){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}})});